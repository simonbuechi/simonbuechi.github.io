(this.webpackJsonppwa=this.webpackJsonppwa||[]).push([[16],{1805:function(e,t,a){"use strict";var r=a(517),n=a(519);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(4)),c=(0,r(a(520)).default)(s.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");t.default=c},2026:function(e,t,a){"use strict";a.r(t);var r=a(779),n=a(524),s=a.n(n),c=a(567),o=a(31),i=a(32),l=a(34),u=a(33),d=a(4),p=a.n(d),f=a(35),h=a(543),m=a(622),b=a(559),v=a(2016),g=a(2002),k=a(2006),S=a(2057),y=a(1998),E=a(1999),O=a(2001),j=a(2003),w=a(642),x=a(2e3),C=a(2041),L=a(1805),q=a.n(L),P=a(873),F=a.n(P),R=a(717),B=a(574),I=a(640),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={ready:!1,secret:"",registrations:null,registrations_changed:!1,registered:!1,shares:0,locked:!1,identifier:"",loading:!1,filename:"",csv:[],activeSnackbar:null},e.componentDidMount=function(){b.a.setAssembly(e.props.match.params.assembly).then((function(){e.getIdentifier(),e.getLock(),e.checkOwner(),e.registrationStatus()})).catch((function(e){return console.error(e)})),e.getRegistrations()},e.getIdentifier=Object(c.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.getIdentifier();case 2:(a=t.sent)&&e.setState({identifier:a});case 4:case"end":return t.stop()}}),t)}))),e.checkOwner=function(){var t=b.a.wallet[0].address;b.a.checkOwner().then((function(a){t===a?!1===e.props.admin&&e.props.setAdmin(!0):!0===e.props.admin&&e.props.setAdmin(!1)})).catch((function(e){console.error(e)}))},e.registrationStatus=function(){b.a.checkRegistrationStatus().then((function(t){return e.setState({secret:t,error:t?null:"not registered yet",registered:!!t})})).catch((function(e){return console.error(e)})),b.a.getShares(b.a.wallet[0].address).then((function(t){return e.setState({shares:t})}))},e.getRegistrations=function(){b.a.getRegistrations().then((function(t){return e.updateRegistrations(t)})).catch((function(e){return console.error(e)}))},e.updateRegistrations=function(){var t=Object(c.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({registrations:a});case 2:if(e.state.csv.length){t.next=4;break}return t.abrupt("return");case 4:try{e.setState({loading:!0}),Object.keys(a).forEach((function(t,r){var n=e.state.csv.find((function(e,a){return e.Secret===t}));"undefined"===typeof n?"0"!==a[t].shares&&(a[t].shares=0,a[t].changed=!0):n.Shares!==a[t].shares&&(a[t].shares=n.Shares,a[t].changed=!0)})),e.saveChanges(a)()}catch(r){console.error(r),e.setState({loading:!1})}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveChanges=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.registrations;return Object(c.a)(s.a.mark((function a(){var r,n,c,o,i,l,u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(a.prev=0,e.setState({loading:!0}),r=e.props.enqueueSnackbar(e.props.t("base.BlockchainSave"),{variant:"warning",persist:!0,action:p.a.createElement(I.a,null)}),e.setState({activeSnackbar:r}),n=[],c=[],o=Object.keys(t),i=0;i<o.length;++i)l=o[i],(u=t[l]).changed&&(n.push(u.address),c.push(u.shares)),t[l].changed=!1;if(!(n.length>0)){a.next=10;break}return a.next=10,b.a.setShareholders(n,c,0);case 10:e.setState({registrations:t,registrations_changed:!1,loading:!1}),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("base.BlockchainSuccessfully"),{variant:"success",action:function(t){return p.a.createElement(B.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),e.registrationStatus(!1),a.next=22;break;case 16:a.prev=16,a.t0=a.catch(0),console.error(a.t0),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackba(e.props.t("base.BlockchainSuccessfully"),{variant:"error",action:function(t){return p.a.createElement(B.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),e.setState({loading:!1});case 22:case"end":return a.stop()}}),a,null,[[0,16]])})))},e.getLock=Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.a.getLock();case 3:t.t1=t.sent,t.t2={locked:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t)}))),e.lock=Object(c.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.enqueueSnackbar(e.props.t("base.BlockchainLock"),{variant:"warning",persist:!0,action:p.a.createElement(I.a,null)}),e.setState({activeSnackbar:a}),t.prev=2,e.setState({loading:!0}),t.next=6,b.a.lock();case 6:e.getLock(),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("base.BlockchainLockSuccess"),{variant:"success",action:function(t){return p.a.createElement(B.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),e.setState({loading:!1}),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("base.BlockchainLockFail"),{variant:"error",action:function(t){return p.a.createElement(B.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),e.setState({loading:!1});case 18:case"end":return t.stop()}}),t,null,[[2,12]])}))),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.admin,s=this.state,c=s.identifier,o=s.loading;return p.a.createElement(v.a,{item:!0,xs:12,lg:9,className:"defaultpadding"},n?p.a.createElement(p.a.Fragment,null,p.a.createElement(g.a,{variant:"h1",gutterBottom:!0},a("admin.titleParticipants")," ",c?" - "+c:""),p.a.createElement(k.a,{onClick:this.getRegistrations,disabled:o,color:"primary",variant:"contained",startIcon:p.a.createElement(F.a,null)},"Refresh list"),"\xa0",p.a.createElement(k.a,{variant:"contained",margin:"normal",color:"primary",disabled:!this.state.registrations_changed||o,onClick:this.saveChanges()},"Save Changes"),this.state.registrations&&p.a.createElement(y.a,null,Object.keys(this.state.registrations).map((function(t,a){return p.a.createElement(E.a,{key:t},p.a.createElement(x.a,null,p.a.createElement(S.a,null,a+1)),p.a.createElement(O.a,{primary:"Access Code: "+t,secondary:"Public Key: "+e.state.registrations[t].address}),p.a.createElement(j.a,null,p.a.createElement(w.a,{disabled:e.state.csv.length>0,label:"No. shares",type:"number",margin:"dense",variant:"outlined",placeholder:"enter no. of shares",value:e.state.registrations[t].shares,style:e.state.registrations[t].changed?{backgroundColor:"orange"}:{},onChange:function(a){var n=Object(r.a)({},e.state.registrations);n[t].shares=a.target.value,n[t].changed=!0,e.setState({registrations:n,registrations_changed:!0})}})))}))),p.a.createElement(C.a,{my:5},p.a.createElement(g.a,{variant:"h2",gutterBottom:!0},a("base.Lock")),p.a.createElement(g.a,{variant:"body2",gutterBottom:!0},a("base.LockDescription")),p.a.createElement(k.a,{disabled:this.state.locked||o,onClick:this.lock,color:"primary",variant:"outlined",startIcon:p.a.createElement(q.a,null)},a("base.Lock")))):p.a.createElement(R.a,null))}}]),a}(d.Component);t.default=Object(h.f)(Object(f.b)()(Object(m.b)(M)))},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(577),n=a(4),s=a.n(n),c=a(2017),o=a(1991),i=a(575),l=a.n(i);function u(e){var t=s.a.useState(100),a=Object(r.a)(t,2),n=a[0],i=a[1];return s.a.useEffect((function(){i(100);var e=setInterval((function(){i((function(e){return e<=0?0:e-2}))}),100);return function(){clearInterval(e)}}),[]),s.a.createElement("div",{className:"toastSpinnerWrapper"},s.a.createElement(o.a,{size:"small",color:"secondary",onClick:function(){e.closeSnackbar(e.snackKey)}},s.a.createElement(l.a,null)),s.a.createElement(c.a,{variant:"determinate",value:n,color:"secondary",size:36,thickness:2,className:"toastSpinner"}))}},575:function(e,t,a){"use strict";var r=a(517),n=a(519);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(4)),c=(0,r(a(520)).default)(s.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=c},640:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(4),n=a.n(r),s=a(2017);function c(){return n.a.createElement(s.a,{variant:"indeterminate",color:"secondary",size:30,thickness:2})}},642:function(e,t,a){"use strict";var r=a(510),n=a(512),s=a(4),c=(a(511),a(513)),o=a(2020),i=a(2021),l=a(2059),u=a(2055),d=a(2022),p=a(565),f=a(564),h=a(514),m=s.forwardRef((function(e,t){var a=e.children,o=e.classes,i=e.className,l=e.component,u=void 0===l?"p":l,d=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Object(n.a)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),h=Object(f.a)(),m=Object(p.a)({props:e,muiFormControl:h,states:["variant","margin","disabled","error","filled","focused","required"]});return s.createElement(u,Object(r.a)({className:Object(c.a)(o.root,("filled"===m.variant||"outlined"===m.variant)&&o.contained,i,m.disabled&&o.disabled,m.error&&o.error,m.filled&&o.filled,m.focused&&o.focused,m.required&&o.required,"dense"===m.margin&&o.marginDense),ref:t},d)," "===a?s.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):a)})),b=Object(h.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(m),v=a(2045),g={standard:o.a,filled:i.a,outlined:l.a},k=s.forwardRef((function(e,t){var a=e.autoComplete,o=e.autoFocus,i=void 0!==o&&o,l=e.children,p=e.classes,f=e.className,h=e.color,m=void 0===h?"primary":h,k=e.defaultValue,S=e.disabled,y=void 0!==S&&S,E=e.error,O=void 0!==E&&E,j=e.FormHelperTextProps,w=e.fullWidth,x=void 0!==w&&w,C=e.helperText,L=e.hiddenLabel,q=e.id,P=e.InputLabelProps,F=e.inputProps,R=e.InputProps,B=e.inputRef,I=e.label,M=e.multiline,_=void 0!==M&&M,N=e.name,T=e.onBlur,z=e.onChange,A=e.onFocus,K=e.placeholder,W=e.required,D=void 0!==W&&W,H=e.rows,V=e.rowsMax,J=e.select,$=void 0!==J&&J,G=e.SelectProps,Q=e.type,U=e.value,X=e.variant,Y=void 0===X?"standard":X,Z=Object(n.a)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","select","SelectProps","type","value","variant"]);var ee={};if("outlined"===Y&&(P&&"undefined"!==typeof P.shrink&&(ee.notched=P.shrink),I)){var te,ae=null!==(te=null===P||void 0===P?void 0:P.required)&&void 0!==te?te:D;ee.label=s.createElement(s.Fragment,null,I,ae&&"\xa0*")}$&&(G&&G.native||(ee.id=void 0),ee["aria-describedby"]=void 0);var re=C&&q?"".concat(q,"-helper-text"):void 0,ne=I&&q?"".concat(q,"-label"):void 0,se=g[Y],ce=s.createElement(se,Object(r.a)({"aria-describedby":re,autoComplete:a,autoFocus:i,defaultValue:k,fullWidth:x,multiline:_,name:N,rows:H,rowsMax:V,type:Q,value:U,id:q,inputRef:B,onBlur:T,onChange:z,onFocus:A,placeholder:K,inputProps:F},ee,R));return s.createElement(d.a,Object(r.a)({className:Object(c.a)(p.root,f),disabled:y,error:O,fullWidth:x,hiddenLabel:L,ref:t,required:D,color:m,variant:Y},Z),I&&s.createElement(u.a,Object(r.a)({htmlFor:q,id:ne},P),I),$?s.createElement(v.a,Object(r.a)({"aria-describedby":re,id:q,labelId:ne,value:U,input:ce},G),l):ce,C&&s.createElement(b,Object(r.a)({id:re},j),C))}));t.a=Object(h.a)({root:{}},{name:"MuiTextField"})(k)},717:function(e,t,a){"use strict";var r=a(31),n=a(32),s=a(34),c=a(33),o=a(4),i=a.n(o),l=a(35),u=a(2041),d=a(2002),p=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.t;return i.a.createElement(u.a,{my:2},i.a.createElement(d.a,{variant:"h2",gutterBottom:!0},e("base.noAccess")),i.a.createElement(d.a,{variant:"body2",gutterBottom:!0},e("admin.adminOnly")))}}]),a}(o.Component);t.a=Object(l.b)()(p)},873:function(e,t,a){"use strict";var r=a(517),n=a(519);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(4)),c=(0,r(a(520)).default)(s.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=c}}]);