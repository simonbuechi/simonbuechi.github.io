(this.webpackJsonppwa=this.webpackJsonppwa||[]).push([[25],{2027:function(e,t,a){"use strict";a.r(t);var n=a(779),r=a(524),c=a.n(r),s=a(567),i=a(31),o=a(32),l=a(34),u=a(33),p=a(4),d=a.n(p),m=a(35),g=a(543),v=a(622),b=a(559),f=a(2016),h=a(1807),k=a(1806),E=a(1808),S=a(2002),y=a(2006),w=a(2057),O=a(642),x=a(2041),j=a(776),B=a(2028),C=a(873),V=a.n(C),I=a(717),A=a(574),q=a(640),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={ready:!1,shares:0,title:"",purpose:"",voting:"",votings:null,locked:!1,identifier:"",loading:!1,pendingBallot:!1,activeSnackbar:null},e.componentDidMount=function(){b.a.setAssembly(e.props.match.params.assembly).then((function(){e.getIdentifier(),e.checkOwner(),e.getVotings()})).catch((function(e){return console.error(e)}))},e.getIdentifier=Object(s.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.getIdentifier();case 2:(a=t.sent)&&e.setState({identifier:a});case 4:case"end":return t.stop()}}),t)}))),e.checkOwner=function(){var t=b.a.wallet[0].address;b.a.checkOwner().then((function(a){t===a?!1===e.props.admin&&e.props.setAdmin(!0):!0===e.props.admin&&e.props.setAdmin(!1)})).catch((function(e){console.error(e)}))},e.getIdentifier=Object(s.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.getIdentifier();case 2:(a=t.sent)&&e.setState({identifier:a});case 4:case"end":return t.stop()}}),t)}))),e.getLock=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b.a.getLock();case 3:t.t1=t.sent,t.t2={locked:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t)}))),e.lock=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.lock();case 3:e.getLock(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),e.addVoting=Object(s.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.props.enqueueSnackbar(e.props.t("agenda.CreateDescription"),{variant:"warning",persist:!0,action:d.a.createElement(q.a,null)}),e.setState({activeSnackbar:a}),e.setState({loading:!0,pendingBallot:!0}),t.t0=e,t.next=7,b.a.deployVoting(e.state.title,e.state.purpose);case 7:t.t1=t.sent,t.t2={voting:t.t1},t.t0.setState.call(t.t0,t.t2),e.setState({title:"",purpose:""}),e.getVotings(),e.setState({loading:!1,pendingBallot:!1}),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("agenda.CreateSuccess"),{variant:"success",action:function(t){return d.a.createElement(A.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),t.next=23;break;case 17:t.prev=17,t.t3=t.catch(0),console.error(t.t3),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("agenda.CreateFailed"),{variant:"error",action:function(t){return d.a.createElement(A.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),e.setState({loading:!1,pendingBallot:!1});case 23:case"end":return t.stop()}}),t,null,[[0,17]])}))),e.getVotings=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=e,t.next=4,b.a.getVotings();case 4:t.t1=t.sent,t.t2={votings:t.t1},t.t0.setState.call(t.t0,t.t2),t.next=12;break;case 9:t.prev=9,t.t3=t.catch(0),console.error(t.t3);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.setVotingTime=function(t){return Object(s.a)(c.a.mark((function a(){var n;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=e.props.enqueueSnackbar(e.props.t("agenda.LaunchDescription"),{variant:"warning",persist:!0,action:d.a.createElement(q.a,null)}),e.setState({activeSnackbar:n}),e.setState({loading:!0}),b.a.setVoting(t),a.next=7,b.a.setVotingTime(t,e.state.votings[t].starttime,e.state.votings[t].endtime);case 7:e.getVotings(),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("agenda.LaunchBallotSuccess"),{variant:"success",action:function(t){return d.a.createElement(A.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),e.setState({loading:!1}),a.next=19;break;case 13:a.prev=13,a.t0=a.catch(0),e.props.closeSnackbar(e.state.activeSnackbar),e.props.enqueueSnackbar(e.props.t("agenda.LaunchBallotFail"),{variant:"error",action:function(t){return d.a.createElement(A.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),console.log(a.t0),e.setState({loading:!1});case 19:case"end":return a.stop()}}),a,null,[[0,13]])})))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.t,r=t.admin,c=this.state,s=c.identifier,i=c.loading,o=c.pendingBallot;return d.a.createElement(f.a,{item:!0,xs:12,lg:9,className:"defaultpadding"},r?d.a.createElement(d.a.Fragment,null,d.a.createElement(S.a,{variant:"h1",gutterBottom:!0},a("admin.titleAgenda")," ",s?" - "+s:""),d.a.createElement(x.a,{my:3},d.a.createElement(S.a,{variant:"body1",gutterBottom:!0},a("agenda.BallotAdd")),d.a.createElement(f.a,{container:!0,spacing:2,alignItems:"center"},d.a.createElement(f.a,{item:!0,xs:12,md:4},d.a.createElement(O.a,{variant:"outlined",required:!0,fullWidth:!0,disabled:i,value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})},label:a("agenda.Item"),placeholder:a("agenda.ItemEnterHere"),margin:"dense"})),d.a.createElement(f.a,{item:!0,xs:12,md:6},d.a.createElement(O.a,{variant:"outlined",required:!0,value:this.state.purpose,onChange:function(t){return e.setState({purpose:t.target.value})},disabled:i,multiline:!0,fullWidth:!0,rowsMax:4,label:a("base.Description"),placeholder:"Enter here...",margin:"dense"})),d.a.createElement(f.a,{item:!0,xs:12,md:!0},d.a.createElement(y.a,{color:"primary",variant:"contained",margin:"normal",fullWidth:!0,disabled:this.state.title.length<1||this.state.purpose.length<1||i,onClick:this.addVoting},a("agenda.BallotAdd"))))),d.a.createElement(x.a,{my:3},d.a.createElement(S.a,{variant:"body1",gutterBottom:!0},a("admin.titleAgenda")),d.a.createElement(y.a,{onClick:this.getVotings,color:"primary",variant:"outlined",startIcon:d.a.createElement(V.a,null),disabled:i},a("agenda.Refresh")),this.state.votings?Object.keys(this.state.votings).map((function(t,r){return d.a.createElement(x.a,{my:1,key:t},d.a.createElement(k.a,null,d.a.createElement(h.a,{avatar:d.a.createElement(w.a,null,r+1),title:e.state.votings[t].title,subheader:e.state.votings[t].purpose,action:!e.state.votings[t].running&&!e.state.votings[t].started&&d.a.createElement(O.a,{label:"Duration in seconds",type:"number",variant:"outlined",disabled:i,placeholder:"in seconds from now",value:e.state.votings[t].endtime,onChange:function(a){var r=Object(n.a)({},e.state.votings);r[t].endtime=a.target.value,e.setState({votings:r})},InputProps:{endAdornment:d.a.createElement(j.a,{position:"end"},d.a.createElement(y.a,{onClick:e.setVotingTime(t),variant:"contained",color:"primary",disabled:i},"Launch now"))}})}),d.a.createElement(E.a,null,d.a.createElement(S.a,{variant:"body2",gutterBottom:!0},"Status:"," ",e.state.votings[t].running?" Running":e.state.votings[t].closed?" Closed":e.state.votings[t].started?"Undefined":"Not yet started"),(e.state.votings[t].running||e.state.votings[t].started)&&d.a.createElement(S.a,{variant:"body2",gutterBottom:!0},a("base.runtime",{starttime:e.state.votings[t].starttime,endtime:e.state.votings[t].endtime})))))})):null,i&&o&&d.a.createElement(x.a,{my:1},d.a.createElement(k.a,null,d.a.createElement(h.a,{avatar:d.a.createElement(B.a,{animation:"wave",variant:"circle",width:40,height:40}),title:d.a.createElement(B.a,{animation:"wave",height:30,width:"80%"})}),d.a.createElement(E.a,null,d.a.createElement(B.a,{animation:"wave",height:30,width:"80%"})))))):d.a.createElement(I.a,null))}}]),a}(p.Component);t.default=Object(g.f)(Object(m.b)()(Object(v.b)(L)))},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(577),r=a(4),c=a.n(r),s=a(2017),i=a(1991),o=a(575),l=a.n(o);function u(e){var t=c.a.useState(100),a=Object(n.a)(t,2),r=a[0],o=a[1];return c.a.useEffect((function(){o(100);var e=setInterval((function(){o((function(e){return e<=0?0:e-2}))}),100);return function(){clearInterval(e)}}),[]),c.a.createElement("div",{className:"toastSpinnerWrapper"},c.a.createElement(i.a,{size:"small",color:"secondary",onClick:function(){e.closeSnackbar(e.snackKey)}},c.a.createElement(l.a,null)),c.a.createElement(s.a,{variant:"determinate",value:r,color:"secondary",size:36,thickness:2,className:"toastSpinner"}))}},640:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(4),r=a.n(n),c=a(2017);function s(){return r.a.createElement(c.a,{variant:"indeterminate",color:"secondary",size:30,thickness:2})}},717:function(e,t,a){"use strict";var n=a(31),r=a(32),c=a(34),s=a(33),i=a(4),o=a.n(i),l=a(35),u=a(2041),p=a(2002),d=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.t;return o.a.createElement(u.a,{my:2},o.a.createElement(p.a,{variant:"h2",gutterBottom:!0},e("base.noAccess")),o.a.createElement(p.a,{variant:"body2",gutterBottom:!0},e("admin.adminOnly")))}}]),a}(i.Component);t.a=Object(l.b)()(d)}}]);