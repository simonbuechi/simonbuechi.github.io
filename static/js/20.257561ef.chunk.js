(this.webpackJsonppwa=this.webpackJsonppwa||[]).push([[20],{1097:function(e,t){},1110:function(e,t){},2031:function(e,t,a){"use strict";a.r(t);var n=a(524),r=a.n(n),o=a(567),i=a(31),c=a(32),s=a(34),l=a(33),m=a(4),u=a.n(m),d=a(35),p=a(548),h=a(543),f=a(622),g=a(1082),E=a(680),v=a.n(E),y=a(2002),b=a(2016),S=a(2006),k=a(642),O=a(2041),w=a(776),_=a(2010),C=a(2011),j=a(2012),V=a(2013),T=a(2034),B=a(1808),L=a(2033),x=a(1807),A=a(1806),I=a(1998),M=a(2001),P=a(1999),D=a(1947),R=a(1912),W=a(1943),N=a(2004),U=a(1913),J=a(2046),F=a(1986),z=a(2057),K=a(559),q=a(872),G=a(671),Y=a(716),H=a(574),Q=Object(m.lazy)((function(){return a.e(11).then(a.bind(null,1941))})),X=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={loading:!1,secret:"",registered:!1,shares:0,modalOpen:!1,identifier:"",activeStep:0,testVideo:!1,gameExpanded:!1,adminProfile:{}},e.componentDidMount=Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:K.a.setAssembly(e.props.match.params.assembly).then((function(){e.getIdentifier(),e.registrationStatus(),e.getShares(),e.checkOwner(),e.updateRegistrationStatus()})).catch((function(e){return console.error(e)}));case 1:case"end":return t.stop()}}),t)}))),e.componentWillUnmount=function(){e.timer&&(clearTimeout(e.timer),e.timer=0)},e.checkOwner=function(){var t=K.a.wallet[0].address;K.a.checkOwner().then((function(a){t===a?!0!==e.props.admin&&e.props.setAdmin(!0):!0===e.props.admin&&e.props.setAdmin(!1),Object(g.getProfile)(a).then((function(t){return e.setState({adminProfile:t})}))})).catch((function(e){console.error(e)}))},e.getShares=Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{K.a.getShares(K.a.wallet[0].address).then((function(t){return e.setState({shares:t})}))}catch(a){console.error(a)}case 1:case"end":return t.stop()}}),t)}))),e.getIdentifier=Object(o.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.a.getIdentifier();case 2:(a=t.sent)&&e.setState({identifier:a});case 4:case"end":return t.stop()}}),t)}))),e.register=function(){e.setState({modalOpen:!1,loading:!0}),Object(Y.b)(e.props.match.params.assembly,e.props.match.params.chain,"assembly",new Date,e.state.identifier),e.props.enqueueSnackbar(e.props.t("login.Thanks"),{variant:"info",action:function(t){return u.a.createElement(H.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),K.a.register(e.state.secret,0,(function(t){console.log("you successfully registered with your access code"),e.registrationStatus(),window.setTimeout(e.setState({loading:!1}),4e3)}),(function(t){e.props.enqueueSnackbar(e.props.t("login.RegisterFailed"),{variant:"error",action:function(t){return u.a.createElement(H.a,{snackKey:t,closeSnackbar:e.props.closeSnackbar})}}),console.error(t),e.setState({loading:!1}),e.registrationStatus()}))},e.registrationStatus=function(){K.a.checkRegistrationStatus().then((function(t){return e.setState({secret:t,registered:!!t})})).catch((function(e){return console.error(e)})),K.a.getShares(K.a.wallet[0].address).then((function(t){return e.setState({shares:t})}))},e.handleChange=function(t){return function(a){e.setState({expanded:t})}},e.handleModalOpen=function(){e.setState({modalOpen:!0})},e.handleModalClose=function(){e.setState({modalOpen:!1})},e.setVideoOn=function(t){e.props.setVideoOn(t.target.checked)},e.setTestVideoOn=function(t){e.setState({testVideo:t.target.checked})},e.setGame=function(t){e.setState({gameExpanded:t.target.checked})},e.setActiveStep=function(t){e.setState({activeStep:t})},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.state.activeStep;(this.state.registered||this.state.loading)&&(e=this.state.shares<=0?2:3),e!==this.state.activeStep&&this.setState({activeStep:e})}},{key:"updateRegistrationStatus",value:function(){var e=this;this.timer=setTimeout((function(){e.getShares(),e.updateRegistrationStatus()}),1e4)}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.videoOn,r=this.state,o=r.modalOpen,i=r.secret,c=r.shares,s=r.identifier,l=r.activeStep,d=r.testVideo,h=r.adminProfile,f=this.props.match.params,g=f.assembly,E=f.chain;return u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{item:!0,xs:12,md:9,lg:6,className:"defaultpadding"},u.a.createElement(y.a,{variant:"h1",gutterBottom:!0},a("login.title")),u.a.createElement(D.a,{activeStep:l,alternativeLabel:!0},u.a.createElement(R.a,{key:"1"},u.a.createElement(W.a,null,"Account")),u.a.createElement(R.a,{key:"2"},u.a.createElement(W.a,null,"Registration")),u.a.createElement(R.a,{key:"3"},u.a.createElement(W.a,null,"Accreditation")),u.a.createElement(R.a,{key:"4"},u.a.createElement(W.a,null,"Join"))),u.a.createElement(A.a,null,u.a.createElement(x.a,{avatar:h.hasOwnProperty("image")?u.a.createElement(z.a,{src:"https://ipfs.infura.io/ipfs/"+h.image[0].contentUrl["/"]}):u.a.createElement(z.a,null,u.a.createElement(v.a,{seed:g,size:10,scale:4,className:"blockies"})),title:s||"Your assembly"}),h.hasOwnProperty("coverPhoto")&&u.a.createElement(L.a,{image:"https://ipfs.infura.io/ipfs/"+h.coverPhoto[0].contentUrl["/"]}),u.a.createElement(O.a,{my:3},0===l&&u.a.createElement(B.a,null,u.a.createElement(O.a,{my:2},u.a.createElement(y.a,{variant:"h2",gutterBottom:!0},"Set up account"),u.a.createElement(y.a,{variant:"body2",gutterBottom:!0},"Voveo has created an account for you. You're ready to move on."),u.a.createElement(S.a,{color:"primary",variant:"contained",onClick:function(){return e.setActiveStep(1)}},"Next")),u.a.createElement(O.a,{mt:4},u.a.createElement(y.a,{variant:"body2",gutterBottom:!0},"Do you want to use another web3 account, e.g. Metamask?"),u.a.createElement(S.a,{color:"primary",variant:"outlined",component:p.b,to:"/account"},"Connect other account"))),1===l&&u.a.createElement(B.a,null,u.a.createElement(O.a,{my:2},u.a.createElement(S.a,{color:"primary",variant:"outlined",onClick:function(){return e.setActiveStep(0)}},"Back")),u.a.createElement(O.a,{my:3},u.a.createElement(y.a,{variant:"h2",gutterBottom:!0},a("login.subtitleParticipant")),u.a.createElement(k.a,{id:"codeParticipant",label:a("login.codeField"),type:"text",value:i,onInput:function(t){return e.setState({secret:t.target.value})},placeholder:a("login.codeFieldPlaceholder"),variant:"outlined",fullWidth:!0,helperText:a("assemblyLogin.AccessCodeDescription"),margin:"normal",InputProps:{endAdornment:u.a.createElement(w.a,{position:"end"},u.a.createElement(S.a,{color:"primary",variant:"contained",disabled:!i,onClick:function(){return e.handleModalOpen()}},a("login.enterButton")))}})),u.a.createElement(O.a,{my:2},u.a.createElement(y.a,{variant:"h2"},a("login.pleasenote")),u.a.createElement(I.a,null,u.a.createElement(P.a,null,u.a.createElement(M.a,{primary:a("login.disclaimerTitle"),secondary:a("login.disclaimer")})),u.a.createElement(P.a,null,u.a.createElement(M.a,{primary:a("login.notesBrowserTitle"),secondary:a("login.notesBrowserDescription")})),u.a.createElement(P.a,null,u.a.createElement(M.a,{primary:a("login.notesSecurityTitle"),secondary:a("login.notesSecurityDescription")}))))),2===l&&u.a.createElement(B.a,null,u.a.createElement(O.a,{my:3},u.a.createElement(y.a,{gutterBottom:!0,variant:"h2"},a("login.AccreditationWait")),u.a.createElement(y.a,{variant:"body2"},a("login.pleasewaitDescription")),u.a.createElement(O.a,{my:3},u.a.createElement(U.a,{control:u.a.createElement(N.a,{checked:this.state.gameExpanded,onChange:this.setGame,name:"tictactoe",color:"primary"}),label:a("login.Play")}),u.a.createElement(F.a,{in:this.state.gameExpanded},u.a.createElement(m.Suspense,{fallback:u.a.createElement(G.a,null)},u.a.createElement(Q,null)))),u.a.createElement(J.a,{smDown:!0},u.a.createElement(U.a,{control:u.a.createElement(N.a,{checked:d||!1,onChange:this.setTestVideoOn,name:"Video",color:"primary"}),label:a("base.testVideoButton")}),u.a.createElement(y.a,{variant:"body2",gutterBottom:!0},a("login.testVideoDescription")),d&&u.a.createElement(O.a,{height:400},u.a.createElement(q.a,{room:"voveo-vote-demo",serverURL:"https://meet.jit.si",startWithAudioMuted:!1,startWithVideoMuted:!1,name:"",email:"",avatarURL:""}))))),3===l&&u.a.createElement(u.a.Fragment,null,u.a.createElement(B.a,null,u.a.createElement(O.a,{my:3},u.a.createElement(y.a,{variant:"h2",gutterBottom:!0},a("base.accredited")),u.a.createElement(y.a,{variant:"body2",gutterBottom:!0},a("base.numberOfShares")+": "+c),u.a.createElement(O.a,{mt:3},u.a.createElement(J.a,{smDown:!0},u.a.createElement(U.a,{control:u.a.createElement(N.a,{checked:n||!1,onChange:this.setVideoOn,name:"Video",color:"primary"}),label:a("base.toggleVideo")}),u.a.createElement(y.a,{variant:"body2",gutterBottom:!0},a("login.pleasenote")," ",": "," ",a("login.noteVideo")))))),u.a.createElement(T.a,null,u.a.createElement(S.a,{variant:"contained",color:"primary",component:p.b,to:"/"+E+"/assembly/"+g+"/overview"},a("login.clickToEnter"))))))),u.a.createElement(_.a,{onClose:this.handleModalClose,"aria-labelledby":"confirmation",open:o},u.a.createElement(C.a,{id:"confirmation"},a("login.confirmTitle")),u.a.createElement(j.a,null,u.a.createElement(y.a,{variant:"body2",gutterBottom:!0},a("login.confirmCode")),u.a.createElement(k.a,{InputProps:{readOnly:!0},label:a("login.codeField"),defaultValue:i,variant:"outlined",margin:"normal",fullWidth:!0})),u.a.createElement(V.a,null,u.a.createElement(S.a,{color:"primary",variant:"outlined",onClick:this.handleModalClose},a("base.cancel")),u.a.createElement(S.a,{color:"primary",variant:"contained",onClick:function(){return e.register()}},a("login.confirmButton")))))}}]),a}(m.Component);t.default=Object(h.f)(Object(d.b)()(Object(f.b)(X)))},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(577),r=a(4),o=a.n(r),i=a(2017),c=a(1991),s=a(575),l=a.n(s);function m(e){var t=o.a.useState(100),a=Object(n.a)(t,2),r=a[0],s=a[1];return o.a.useEffect((function(){s(100);var e=setInterval((function(){s((function(e){return e<=0?0:e-2}))}),100);return function(){clearInterval(e)}}),[]),o.a.createElement("div",{className:"toastSpinnerWrapper"},o.a.createElement(c.a,{size:"small",color:"secondary",onClick:function(){e.closeSnackbar(e.snackKey)}},o.a.createElement(l.a,null)),o.a.createElement(i.a,{variant:"determinate",value:r,color:"secondary",size:36,thickness:2,className:"toastSpinner"}))}},716:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){return"https://sandbox.truffleteams.com/01b581c6-0ffe-46ce-9dc7-d4d76823077b".split(".")[0].replace("https://","")},r=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=window.localStorage.getItem("assemblies")?JSON.parse(window.localStorage.getItem("assemblies")):[],i=!1;o.forEach((function(t){t.address===e&&(i=!0)})),i||(o.push({address:e,chain:t,type:a,datetime:n,identifier:r}),window.localStorage.setItem("assemblies",JSON.stringify(o)))}},872:function(e,t,a){"use strict";var n=a(31),r=a(32),o=a(40),i=a(34),c=a(33),s=a(4),l=a.n(s),m=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={isLoading:!0},r._ref=l.a.createRef(),r._onIframeLoad=r._onIframeLoad.bind(Object(o.a)(r)),r._onVideoConferenceEnded=r._onVideoConferenceEnded.bind(Object(o.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this._ref.current,a=this.props.room,n=this.props.serverURL;this._conference={room:a,serverURL:n};var r=document.createElement("script");r.async=!0,r.onload=function(){return e._onScriptLoad(t)},r.src="https://meet.jit.si/external_api.js",this._ref.current.appendChild(r),this._loadTimer=setTimeout((function(){e.props.setVideoOn(!1)}),1e4)}},{key:"componentWillUnmount",value:function(){this._loadTimer&&clearTimeout(this._loadTimer),this._api&&this._api.dispose()}},{key:"_onScriptLoad",value:function(e){var t=window.JitsiMeetExternalAPI,a=this._conference.serverURL.replace(/https?:\/\//,""),n={startWithAudioMuted:this.props.startWithAudioMuted,startWithVideoMuted:this.props.startWithVideoMuted};this._api=new t(a,{configOverwrite:n,onload:this._onIframeLoad,parentNode:e,roomName:this._conference.room}),this._api.on("suspendDetected",this._onVideoConferenceEnded),this._api.on("readyToClose",this._onVideoConferenceEnded),this._api.on("videoConferenceJoined",(function(e){console.log("joined")}))}},{key:"_onVideoConferenceEnded",value:function(e){console.log("videoconf ended")}},{key:"_onIframeLoad",value:function(){this._loadTimer&&(clearTimeout(this._loadTimer),this._loadTimer=null),this.setState({isLoading:!1})}},{key:"render",value:function(){return l.a.createElement("div",{className:"jitsi",ref:this._ref},this.state.isLoading&&l.a.createElement("p",null,"Loading"))}}]),a}(s.Component);t.a=m}}]);